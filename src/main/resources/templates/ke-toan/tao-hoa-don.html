<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T·∫°o h√≥a ƒë∆°n - Qu·∫£n l√Ω chung c∆∞</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/admin.css}">
    <style>
        .invoice-type-section {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .invoice-type-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: 600;
            color: #495057;
        }
        
        .calculation-section {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .calculation-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
        }
        
        .calculation-label {
            font-weight: 600;
            color: #495057;
        }
        
        .calculation-value {
            font-weight: bold;
            color: #28a745;
        }
        
        .total-section {
            background: #e8f5e8;
            border: 2px solid #28a745;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .total-amount {
            font-size: 24px;
            font-weight: bold;
            color: #28a745;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h3>BLUE MOON</h3>
                <p class="role-badge">K·∫ø to√°n</p>
            </div>
            
            <nav class="sidebar-menu">
                <ul>
                    <li>
                        <a href="/ke-toan/dashboard">
                            <img src="/images/img4.png" alt="Dashboard" style="width: 18px; height: 18px; margin-right: 12px;"> Dashboard
                        </a>
                    </li>
                    <li>
                        <a href="/ke-toan/quan-ly-hoa-don" class="active">
                            <img src="/images/hoa-don.png" alt="Qu·∫£n l√Ω h√≥a ƒë∆°n" style="width: 18px; height: 18px; margin-right: 12px;"> Qu·∫£n l√Ω h√≥a ƒë∆°n
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
                    <h2 id="pageTitle">T·∫°o h√≥a ƒë∆°n</h2>
                </div>
                
                <div class="header-right">
                    <div class="user-info">
                        <span>Xin ch√†o, <strong th:text="${username}">K·∫ø to√°n</strong></span>
                        <form th:action="@{/logout}" method="post" style="display: inline;">
                            <button type="submit" class="btn btn-sm btn-danger">ƒêƒÉng xu·∫•t</button>
                        </form>
                    </div>
                </div>
            </header>
            
            <!-- Page Content -->
            <main class="page-content">
                <!-- Messages -->
                <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
                <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>
                
                <div class="form-container">
                    <form th:action="@{/ke-toan/quan-ly-hoa-don/luu}" method="post" id="invoiceForm">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                        <input type="hidden" name="loaiHoaDon" th:value="${loaiHoaDon}" id="loaiHoaDon">
                        
                        
                        <div class="form-group">
                            <label for="maHo">M√£ h·ªô <span class="required">*</span></label>
                            <select id="maHo" name="maHo" class="form-control" required>
                                <option value="">-- Ch·ªçn h·ªô gia ƒë√¨nh --</option>
                                <option th:each="ho : ${hoGiaDinhList}" 
                                        th:value="${ho.maHo}" 
                                        th:text="${ho.maHo + ' - ' + ho.tenHo}">H001 - H·ªô 1</option>
                            </select>
                        </div>
                        
                        <!-- ƒêi·ªán n∆∞·ªõc section -->
                        <div id="dienNuocSection" class="hidden">
                            <div class="form-group">
                                <label for="kyThanhToan">K·ª≥ thanh to√°n <span class="required">*</span></label>
                                <input type="text" id="kyThanhToan" name="kyThanhToan" class="form-control" 
                                       placeholder="VD: 01/2024" required>
                            </div>
                            
                            <!-- Ch·ªâ s·ªë ƒëi·ªán -->
                            <div class="calculation-section">
                                <h4>‚ö° Ch·ªâ s·ªë ƒëi·ªán</h4>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="dienCu">Ch·ªâ s·ªë ƒëi·ªán c≈© <span class="required">*</span></label>
                                        <input type="number" id="dienCu" name="dienCu" class="form-control" 
                                               min="0" step="1" required onchange="calculateTotal()">
                                    </div>
                                    <div class="form-group">
                                        <label for="dienMoi">Ch·ªâ s·ªë ƒëi·ªán m·ªõi <span class="required">*</span></label>
                                        <input type="number" id="dienMoi" name="dienMoi" class="form-control" 
                                               min="0" step="1" required onchange="calculateTotal()">
                                    </div>
                                </div>
                                <div class="calculation-row">
                                    <span class="calculation-label">S·ªë ƒëi·ªán ti√™u th·ª•:</span>
                                    <span class="calculation-value" id="soDienTieuThu">0 s·ªë</span>
                                </div>
                                <div class="calculation-row">
                                    <span class="calculation-label">Ti·ªÅn ƒëi·ªán (3,500 VNƒê/s·ªë):</span>
                                    <span class="calculation-value" id="tienDien">0 VNƒê</span>
                                </div>
                            </div>
                            
                            <!-- Ch·ªâ s·ªë n∆∞·ªõc -->
                            <div class="calculation-section">
                                <h4>üíß Ch·ªâ s·ªë n∆∞·ªõc</h4>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="nuocCu">Ch·ªâ s·ªë n∆∞·ªõc c≈© <span class="required">*</span></label>
                                        <input type="number" id="nuocCu" name="nuocCu" class="form-control" 
                                               min="0" step="1" required onchange="calculateTotal()">
                                    </div>
                                    <div class="form-group">
                                        <label for="nuocMoi">Ch·ªâ s·ªë n∆∞·ªõc m·ªõi <span class="required">*</span></label>
                                        <input type="number" id="nuocMoi" name="nuocMoi" class="form-control" 
                                               min="0" step="1" required onchange="calculateTotal()">
                                    </div>
                                </div>
                                <div class="calculation-row">
                                    <span class="calculation-label">S·ªë kh·ªëi n∆∞·ªõc ti√™u th·ª•:</span>
                                    <span class="calculation-value" id="soNuocTieuThu">0 kh·ªëi</span>
                                </div>
                                <div class="calculation-row">
                                    <span class="calculation-label">Ti·ªÅn n∆∞·ªõc (10,000 VNƒê/kh·ªëi):</span>
                                    <span class="calculation-value" id="tienNuoc">0 VNƒê</span>
                                </div>
                            </div>
                            
                            <!-- T·ªïng ti·ªÅn ƒëi·ªán n∆∞·ªõc -->
                            <div class="total-section">
                                <h4>T·ªïng ti·ªÅn h√≥a ƒë∆°n ƒëi·ªán n∆∞·ªõc</h4>
                                <div class="total-amount" id="tongTienDienNuoc">0 VNƒê</div>
                                <!-- Hidden input ƒë·ªÉ l∆∞u s·ªë ti·ªÅn -->
                                <input type="hidden" id="soTienDienNuoc" name="soTienDienNuoc" value="0">
                            </div>
                        </div>
                        
                        <!-- C√°c lo·∫°i h√≥a ƒë∆°n kh√°c -->
                        <div id="otherInvoiceSection" class="hidden">
                            <div class="form-group">
                                <label for="soTien">S·ªë ti·ªÅn (VNƒê) <span class="required">*</span></label>
                                <input type="number" id="soTien" name="soTien" class="form-control" 
                                       min="0" step="1000" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="moTa">M√¥ t·∫£ chi ti·∫øt <span class="required">*</span></label>
                                <textarea id="moTa" name="moTa" class="form-control" rows="4" 
                                          placeholder="Nh·∫≠p m√¥ t·∫£ chi ti·∫øt v·ªÅ h√≥a ƒë∆°n..." required></textarea>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="hanThanhToan">H·∫°n thanh to√°n <span class="required">*</span></label>
                            <input type="date" id="hanThanhToan" name="hanThanhToan" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="ghiChu">Ghi ch√∫</label>
                            <textarea id="ghiChu" name="ghiChu" class="form-control" rows="3" 
                                      placeholder="Nh·∫≠p ghi ch√∫ (n·∫øu c√≥)..."></textarea>
                        </div>
                        
                        <div class="form-actions" style="display: flex !important; gap: 15px; justify-content: flex-end; margin-top: 30px; padding-top: 20px; border-top: 1px solid #dee2e6;">
                            <a href="/ke-toan/quan-ly-hoa-don" class="btn btn-secondary" style="display: inline-block !important; background-color: #ef4444; color: white; border-color: #ef4444;">H·ªßy</a>
                            <button type="button" class="btn btn-primary" id="submitButton" onclick="submitForm()" style="display: inline-block !important;">
                                <img src="/images/save.png" alt="L∆∞u" style="width: 14px; height: 14px; filter: brightness(0) invert(1); margin-right: 8px; vertical-align: middle;"> L∆∞u
                            </button>
                        </div>
                    </form>
                </div>
            </main>
        </div>
    </div>
    
    <script th:src="@{/js/script.js}"></script>
    <script>
        // L·∫•y lo·∫°i h√≥a ƒë∆°n t·ª´ URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const loaiHoaDon = urlParams.get('loai');
        
        // C·∫≠p nh·∫≠t giao di·ªán d·ª±a tr√™n lo·∫°i h√≥a ƒë∆°n
        function updateInterface() {
            const pageTitle = document.getElementById('pageTitle');
            const dienNuocSection = document.getElementById('dienNuocSection');
            const otherInvoiceSection = document.getElementById('otherInvoiceSection');
            const submitButton = document.getElementById('submitButton');
            
            switch(loaiHoaDon) {
                case 'dien_nuoc':
                    pageTitle.textContent = ' T·∫°o h√≥a ƒë∆°n ƒëi·ªán n∆∞·ªõc';
                    dienNuocSection.classList.remove('hidden');
                    otherInvoiceSection.classList.add('hidden');
                    if (submitButton) submitButton.innerHTML = '<img src="/images/save.png" alt="L∆∞u" style="width: 14px; height: 14px; filter: brightness(0) invert(1); margin-right: 8px; vertical-align: middle;"> L∆∞u h√≥a ƒë∆°n ƒëi·ªán n∆∞·ªõc';
                    break;
                case 'dich_vu':
                    pageTitle.textContent = ' T·∫°o h√≥a ƒë∆°n d·ªãch v·ª•';
                    dienNuocSection.classList.add('hidden');
                    otherInvoiceSection.classList.remove('hidden');
                    if (submitButton) submitButton.innerHTML = '<img src="/images/save.png" alt="L∆∞u" style="width: 14px; height: 14px; filter: brightness(0) invert(1); margin-right: 8px; vertical-align: middle;"> L∆∞u h√≥a ƒë∆°n d·ªãch v·ª•';
                    break;
                case 'sua_chua':
                    pageTitle.textContent = ' T·∫°o h√≥a ƒë∆°n s·ª≠a ch·ªØa';
                    dienNuocSection.classList.add('hidden');
                    otherInvoiceSection.classList.remove('hidden');
                    if (submitButton) submitButton.innerHTML = '<img src="/images/save.png" alt="L∆∞u" style="width: 14px; height: 14px; filter: brightness(0) invert(1); margin-right: 8px; vertical-align: middle;"> L∆∞u h√≥a ƒë∆°n s·ª≠a ch·ªØa';
                    break;
                case 'phat':
                    pageTitle.textContent = ' T·∫°o h√≥a ƒë∆°n ph·∫°t';
                    dienNuocSection.classList.add('hidden');
                    otherInvoiceSection.classList.remove('hidden');
                    if (submitButton) submitButton.innerHTML = '<img src="/images/save.png" alt="L∆∞u" style="width: 14px; height: 14px; filter: brightness(0) invert(1); margin-right: 8px; vertical-align: middle;"> L∆∞u h√≥a ƒë∆°n ph·∫°t';
                    break;
                case 'khac':
                    pageTitle.textContent = ' T·∫°o h√≥a ƒë∆°n kh√°c';
                    dienNuocSection.classList.add('hidden');
                    otherInvoiceSection.classList.remove('hidden');
                    if (submitButton) submitButton.innerHTML = '<img src="/images/save.png" alt="L∆∞u" style="width: 14px; height: 14px; filter: brightness(0) invert(1); margin-right: 8px; vertical-align: middle;"> L∆∞u h√≥a ƒë∆°n kh√°c';
                    break;
            }
        }
        
        // T√≠nh to√°n t·ªïng ti·ªÅn ƒëi·ªán n∆∞·ªõc
        function calculateTotal() {
            console.log('=== DEBUG: B·∫Øt ƒë·∫ßu t√≠nh to√°n t·ªïng ti·ªÅn ===');
            
            const dienCu = parseFloat(document.getElementById('dienCu').value) || 0;
            const dienMoi = parseFloat(document.getElementById('dienMoi').value) || 0;
            const nuocCu = parseFloat(document.getElementById('nuocCu').value) || 0;
            const nuocMoi = parseFloat(document.getElementById('nuocMoi').value) || 0;
            
            console.log('Ch·ªâ s·ªë:', {dienCu, dienMoi, nuocCu, nuocMoi});
            
            // T√≠nh s·ªë ƒëi·ªán ti√™u th·ª•
            const soDienTieuThu = Math.max(0, dienMoi - dienCu);
            document.getElementById('soDienTieuThu').textContent = soDienTieuThu + ' s·ªë';
            
            // T√≠nh ti·ªÅn ƒëi·ªán (3,500 VNƒê/s·ªë)
            const tienDien = soDienTieuThu * 3500;
            document.getElementById('tienDien').textContent = tienDien.toLocaleString('vi-VN') + ' VNƒê';
            
            // T√≠nh s·ªë kh·ªëi n∆∞·ªõc ti√™u th·ª•
            const soNuocTieuThu = Math.max(0, nuocMoi - nuocCu);
            document.getElementById('soNuocTieuThu').textContent = soNuocTieuThu + ' kh·ªëi';
            
            // T√≠nh ti·ªÅn n∆∞·ªõc (10,000 VNƒê/kh·ªëi)
            const tienNuoc = soNuocTieuThu * 10000;
            document.getElementById('tienNuoc').textContent = tienNuoc.toLocaleString('vi-VN') + ' VNƒê';
            
            // T√≠nh t·ªïng ti·ªÅn
            const tongTien = tienDien + tienNuoc;
            document.getElementById('tongTienDienNuoc').textContent = tongTien.toLocaleString('vi-VN') + ' VNƒê';
            
            // C·∫≠p nh·∫≠t hidden input cho s·ªë ti·ªÅn ƒëi·ªán n∆∞·ªõc
            const soTienDienNuocInput = document.getElementById('soTienDienNuoc');
            soTienDienNuocInput.value = tongTien;
            
            console.log('T·ªïng ti·ªÅn:', tongTien);
            console.log('S·ªë ti·ªÅn input value:', soTienDienNuocInput.value);
        }
        
        // ƒê·∫∑t ng√†y h·∫°n thanh to√°n m·∫∑c ƒë·ªãnh l√† 30 ng√†y t·ª´ h√¥m nay
        function setDefaultDueDate() {
            const today = new Date();
            const futureDate = new Date(today.getTime() + (30 * 24 * 60 * 60 * 1000));
            const dateString = futureDate.toISOString().split('T')[0];
            document.getElementById('hanThanhToan').value = dateString;
        }
        
        // C·∫≠p nh·∫≠t s·ªë ti·ªÅn khi ng∆∞·ªùi d√πng nh·∫≠p v√†o √¥ s·ªë ti·ªÅn
        function updateSoTien() {
            const soTienInput = document.getElementById('soTien');
            const soTienValue = parseFloat(soTienInput.value) || 0;
            // ƒê·∫£m b·∫£o s·ªë ti·ªÅn kh√¥ng √¢m
            if (soTienValue < 0) {
                soTienInput.value = 0;
            }
        }
        
        // Function ƒë·ªÉ submit form
        function submitForm() {
            console.log('=== DEBUG: submitForm() called ===');
            
            // Validate form tr∆∞·ªõc
            if (!validateForm()) {
                console.log('=== DEBUG: Form validation failed ===');
                return false;
            }
            
            const form = document.getElementById('invoiceForm');
            if (form) {
                console.log('=== DEBUG: Form validation passed, submitting ===');
                
                // Log form data
                const formData = new FormData(form);
                console.log('Form data:');
                for (let [key, value] of formData.entries()) {
                    console.log(key + ': ' + value);
                }
                
                // Submit form
                form.submit();
            } else {
                console.log('=== DEBUG: Form not found! ===');
            }
        }
        
        // Validate form tr∆∞·ªõc khi submit
        function validateForm() {
            console.log('=== DEBUG: B·∫Øt ƒë·∫ßu validate form ===');
            console.log('loaiHoaDon:', loaiHoaDon);
            
            const maHoElement = document.getElementById('maHo');
            const maHo = maHoElement ? maHoElement.value : '';
            const hanThanhToan = document.getElementById('hanThanhToan').value;
            
            // L·∫•y s·ªë ti·ªÅn d·ª±a tr√™n lo·∫°i h√≥a ƒë∆°n
            let soTien;
            if (loaiHoaDon === 'dien_nuoc') {
                soTien = document.getElementById('soTienDienNuoc').value;
            } else {
                soTien = document.getElementById('soTien').value;
            }
            
            console.log('maHo:', maHo);
            console.log('soTien:', soTien);
            console.log('hanThanhToan:', hanThanhToan);
            
            if (!maHo || maHo.trim() === '') {
                alert('Vui l√≤ng ch·ªçn m√£ h·ªô gia ƒë√¨nh!');
                console.log('Validation failed: M√£ h·ªô kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng');
                return false;
            }
            
            if (!soTien || parseFloat(soTien) <= 0) {
                alert('Vui l√≤ng nh·∫≠p s·ªë ti·ªÅn h·ª£p l·ªá!');
                console.log('Validation failed: S·ªë ti·ªÅn kh√¥ng h·ª£p l·ªá');
                return false;
            }
            
            if (!hanThanhToan) {
                alert('Vui l√≤ng ch·ªçn h·∫°n thanh to√°n!');
                console.log('Validation failed: H·∫°n thanh to√°n kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng');
                return false;
            }
            
            // Ki·ªÉm tra th√™m cho ƒëi·ªán n∆∞·ªõc
            if (loaiHoaDon === 'dien_nuoc') {
                console.log('=== DEBUG: Ki·ªÉm tra validation cho ƒëi·ªán n∆∞·ªõc ===');
                const kyThanhToan = document.getElementById('kyThanhToan').value;
                const dienCu = document.getElementById('dienCu').value;
                const dienMoi = document.getElementById('dienMoi').value;
                const nuocCu = document.getElementById('nuocCu').value;
                const nuocMoi = document.getElementById('nuocMoi').value;
                
                console.log('kyThanhToan:', kyThanhToan);
                console.log('dienCu:', dienCu, 'dienMoi:', dienMoi);
                console.log('nuocCu:', nuocCu, 'nuocMoi:', nuocMoi);
                
                if (!kyThanhToan) {
                    alert('Vui l√≤ng nh·∫≠p k·ª≥ thanh to√°n!');
                    console.log('Validation failed: K·ª≥ thanh to√°n kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng');
                    return false;
                }
                
                if (!dienCu || !dienMoi || !nuocCu || !nuocMoi) {
                    alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß ch·ªâ s·ªë ƒëi·ªán n∆∞·ªõc!');
                    console.log('Validation failed: Ch·ªâ s·ªë ƒëi·ªán n∆∞·ªõc kh√¥ng ƒë·∫ßy ƒë·ªß');
                    return false;
                }
                
                if (parseInt(dienMoi) < parseInt(dienCu)) {
                    alert('Ch·ªâ s·ªë ƒëi·ªán m·ªõi ph·∫£i l·ªõn h∆°n ch·ªâ s·ªë ƒëi·ªán c≈©!');
                    console.log('Validation failed: Ch·ªâ s·ªë ƒëi·ªán m·ªõi < ch·ªâ s·ªë ƒëi·ªán c≈©');
                    return false;
                }
                
                if (parseInt(nuocMoi) < parseInt(nuocCu)) {
                    alert('Ch·ªâ s·ªë n∆∞·ªõc m·ªõi ph·∫£i l·ªõn h∆°n ch·ªâ s·ªë n∆∞·ªõc c≈©!');
                    console.log('Validation failed: Ch·ªâ s·ªë n∆∞·ªõc m·ªõi < ch·ªâ s·ªë n∆∞·ªõc c≈©');
                    return false;
                }
            }
            
            // Ki·ªÉm tra cho c√°c lo·∫°i h√≥a ƒë∆°n kh√°c
            if (loaiHoaDon !== 'dien_nuoc') {
                const moTa = document.getElementById('moTa').value;
                if (!moTa || moTa.trim() === '') {
                    alert('Vui l√≤ng nh·∫≠p m√¥ t·∫£ chi ti·∫øt!');
                    console.log('Validation failed: M√¥ t·∫£ kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng');
                    return false;
                }
            }
            
            console.log('=== DEBUG: Validation th√†nh c√¥ng ===');
            return true;
        }
        
        // Th√™m event listener cho form submit
        document.addEventListener('DOMContentLoaded', function() {
            updateInterface();
            setDefaultDueDate();
            
            // Th√™m event listener cho √¥ s·ªë ti·ªÅn (ch·ªâ cho c√°c lo·∫°i h√≥a ƒë∆°n kh√°c ƒëi·ªán n∆∞·ªõc)
            const soTienInput = document.getElementById('soTien');
            if (soTienInput) {
                soTienInput.addEventListener('input', updateSoTien);
            }
            
            // Th√™m event listener cho form submit
            const form = document.getElementById('invoiceForm');
            if (form) {
                console.log('=== DEBUG: Form found, adding submit listener ===');
                form.addEventListener('submit', function(e) {
                    console.log('=== DEBUG: Form submit event triggered ===');
                    
                    // Log t·∫•t c·∫£ form data
                    const formData = new FormData(form);
                    console.log('Form data:');
                    for (let [key, value] of formData.entries()) {
                        console.log(key + ': ' + value);
                    }
                    
                    // T·∫°m th·ªùi b·ªè qua validation ƒë·ªÉ test
                    console.log('=== DEBUG: Skipping validation for testing ===');
                    // if (!validateForm()) {
                    //     console.log('=== DEBUG: Form validation failed ===');
                    //     e.preventDefault();
                    //     return false;
                    // }
                    
                    console.log('=== DEBUG: Form validation passed, submitting ===');
                    // Kh√¥ng preventDefault ƒë·ªÉ form ƒë∆∞·ª£c submit
                });
            } else {
                console.log('=== DEBUG: Form not found! ===');
            }
            
            // Th√™m event listener cho n√∫t submit ƒë·ªÉ debug
            const submitButton = document.getElementById('submitButton');
            if (submitButton) {
                console.log('=== DEBUG: Submit button found ===');
                console.log('Submit button:', submitButton);
                console.log('Submit button style:', window.getComputedStyle(submitButton));
                submitButton.addEventListener('click', function(e) {
                    console.log('=== DEBUG: Submit button clicked ===');
                    // Kh√¥ng preventDefault ƒë·ªÉ form ƒë∆∞·ª£c submit
                });
            } else {
                console.log('=== DEBUG: Submit button not found! ===');
            }
            
            // Ki·ªÉm tra form-actions
            const formActions = document.querySelector('.form-actions');
            if (formActions) {
                console.log('=== DEBUG: Form actions found ===');
                console.log('Form actions:', formActions);
                console.log('Form actions style:', window.getComputedStyle(formActions));
            } else {
                console.log('=== DEBUG: Form actions not found! ===');
            }
        });
    </script>
</body>
</html>